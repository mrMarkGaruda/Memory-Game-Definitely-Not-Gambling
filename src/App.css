/* -------------------------------------------------------------------------- */
/* Design Tokens                                                             */
/* -------------------------------------------------------------------------- */
:root {
  --c-bg: #0d1324;
  --c-bg-alt: #151c33;
  --c-bg-panel: linear-gradient(145deg, rgba(18,24,44,0.92), rgba(30,38,66,0.88));
  --c-border: rgba(118,148,255,0.18);
  --c-border-strong: rgba(255,201,102,0.4);
  --c-text: #f2f4ff;
  --c-text-dim: rgba(198,210,255,0.72);
  --c-accent: #ffc966;
  --c-accent-light: #818cf8;
  --c-accent-dark: #4f46e5;
  --c-positive: #44e28f;
  --c-negative: #ff5b7c;
  --c-win: #059669;
  --c-lose: #dc2626;
  --radius-s: 6px;
  --radius-m: 12px;
  --radius-l: 20px;
  --radius-xl: 24px;
  --shadow-panel: 0 18px 45px -24px rgba(8,6,24,0.9);
  --shadow-hover: 0 16px 30px -18px rgba(255,184,78,0.45);
  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.4);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.4);
  --shadow-glow: 0 0 20px rgba(99, 102, 241, 0.4);
  --trans-fast: 150ms ease;
  --trans-med: 220ms ease;
  --font-mono: 'Courier New', monospace;
}

/* Global Resets */
body, #root {
  background: radial-gradient(circle at 20% 15%, #182142, #0d1324 60%);
  min-height: 100vh;
  color: var(--c-text);
  margin: 0;
  padding: 0;
}

#root {
  height: 100vh;
  overflow: hidden;
}

* {
  box-sizing: border-box;
}

/* App Container */
.app-container {
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.app-main {
  flex: 1;
  display: grid;
  grid-template-columns: 280px 1fr 320px;
  gap: 0;
  overflow: hidden;
  min-height: 0;
}

/* Sidebars */
.sidebar-left, .sidebar-right {
  background: linear-gradient(145deg, rgba(17,24,39,0.98), rgba(10,14,26,0.98));
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  padding: 1.5rem;
  backdrop-filter: blur(10px);
}

.sidebar-left {
  border-right: 1px solid var(--c-border);
}

.sidebar-right {
  border-left: 1px solid var(--c-border);
}

/* Scrollbar styling for sidebars */
.sidebar-left::-webkit-scrollbar,
.sidebar-right::-webkit-scrollbar {
  width: 8px;
}

.sidebar-left::-webkit-scrollbar-track,
.sidebar-right::-webkit-scrollbar-track {
  background: rgba(12,16,32,0.4);
  border-radius: 10px;
}

.sidebar-left::-webkit-scrollbar-thumb,
.sidebar-right::-webkit-scrollbar-thumb {
  background: rgba(118,148,255,0.35);
  border-radius: 10px;
}

.sidebar-left::-webkit-scrollbar-thumb:hover,
.sidebar-right::-webkit-scrollbar-thumb:hover {
  background: rgba(118,148,255,0.5);
}

/* Branding */
.app-branding {
  padding: 1.5rem 1.25rem;
  border-bottom: 2px solid var(--c-border);
  text-align: center;
  background: linear-gradient(180deg, rgba(99,102,241,0.1) 0%, transparent 100%);
}

.app-logo {
  font-size: 1.5rem;
  font-weight: 800;
  color: var(--c-accent);
  margin: 0;
  text-shadow: 0 0 20px rgba(255,201,102,0.5);
}

/* Stats Sidebar */
.stats-sidebar {
  flex: 1;
  padding: 1.5rem 1.25rem;
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

.sidebar-section {
  background: rgba(26,31,46,0.4);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-l);
  padding: 1rem;
}

.sidebar-highlight {
  background: linear-gradient(145deg, rgba(255,201,102,0.15), rgba(255,184,78,0.1));
  border: 2px solid var(--c-border-strong);
}

.sidebar-profit {
  background: linear-gradient(145deg, rgba(68,226,143,0.15), rgba(5,150,105,0.1)) !important;
  border-color: var(--c-positive) !important;
}

.sidebar-loss {
  background: linear-gradient(145deg, rgba(255,91,124,0.15), rgba(220,38,38,0.1)) !important;
  border-color: var(--c-negative) !important;
}

.sidebar-title {
  font-size: 0.75rem;
  font-weight: 700;
  color: var(--c-text-dim);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin: 0 0 0.75rem 0;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--c-border);
}

.stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
}

.stat-row:not(:last-child) {
  border-bottom: 1px dashed var(--c-border);
}

.stat-label {
  font-size: 0.8125rem;
  color: var(--c-text-dim);
  font-weight: 600;
}

.stat-value {
  font-size: 1rem;
  font-weight: 700;
  color: var(--c-text);
}

.stat-value-large {
  font-size: 2rem;
  font-weight: 800;
  line-height: 1;
  text-align: center;
  margin-bottom: 0.5rem;
}

.stat-subtext {
  font-size: 0.875rem;
  color: var(--c-text-dim);
  text-align: center;
  font-weight: 600;
}

.stat-coins {
  color: var(--c-accent);
}

/* Game Area */
.game-area {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  background: radial-gradient(ellipse at center, rgba(99,102,241,0.05) 0%, transparent 70%);
}

.app-shell {
  max-width: 1680px;
  margin: 0 auto;
  padding: 1.25rem 1.25rem 2.5rem;
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

/* Header */
.app-header {
  display: flex;
  flex-wrap: wrap;
  gap: 1.25rem;
  justify-content: space-between;
  align-items: flex-end;
  background: var(--c-bg-panel);
  padding: 1.25rem 1.5rem;
  border: 1px solid var(--c-border);
  border-radius: var(--radius-l);
  box-shadow: var(--shadow-panel);
}

.app-title { margin: 0; font-size: 2.1rem; letter-spacing: .02em; }

.status-bar__tagline {
  margin: 0.4rem 0 0;
  max-width: 28rem;
  font-size: 0.95rem;
  color: rgba(198, 210, 255, 0.78);
}

.header-metrics { display:grid; gap:.75rem; grid-auto-flow:column; grid-auto-columns: minmax(100px,1fr); }
.metric { background: rgba(12,16,32,0.55); padding:.75rem 1rem; border-radius: var(--radius-m); text-align:center; }
.metric__label { display:block; font-size:.65rem; text-transform:uppercase; letter-spacing:.08em; color: var(--c-text-dim); }
.metric__value { display:block; font-weight:700; font-size:1.15rem; margin-top:.25rem; }
.metric--net.positive { background: rgba(24,153,74,0.22); color: var(--c-positive); }
.metric--net.negative { background: rgba(190,30,60,0.22); color: var(--c-negative); }

.status-bar__totals .label {
  display: block;
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: rgba(165, 181, 255, 0.6);
}

.status-bar__totals .value {
  display: block;
  margin-top: 0.25rem;
  font-size: 1.35rem;
  font-weight: 700;
  color: #f2f4ff;
}

.net-result {
  border-radius: 0.9rem;
  padding: 0.75rem 1rem;
  background: rgba(12, 15, 32, 0.6);
}

.net-result--positive {
  background: rgba(24, 153, 74, 0.18);
  color: #44e28f;
}

.net-result--negative {
  background: rgba(190, 30, 60, 0.18);
  color: #ff5b7c;
}

/* Grid Layout */
.app-grid { display:grid; grid-template-columns: 340px 1fr 430px; gap:1.5rem; align-items:start; }
.left-column, .center-column, .right-column { display:flex; flex-direction:column; gap:1.25rem; }
.right-column { position:sticky; top:1.25rem; max-height: calc(100vh - 3rem); }

/* Generic Panels */
.panel { background: var(--c-bg-panel); border:1px solid var(--c-border); border-radius: var(--radius-l); padding:1.15rem 1.25rem; box-shadow: var(--shadow-panel); display:flex; flex-direction:column; gap:1rem; position:relative; overflow:hidden; }
.panel__head { display:flex; align-items:center; justify-content:space-between; gap:.75rem; }
.panel__title { margin:0; font-size:1.15rem; letter-spacing:.05em; text-transform:uppercase; color: var(--c-accent); }
.panel__section { display:flex; flex-direction:column; gap:.9rem; }
.subheading { margin:0; font-size:.9rem; letter-spacing:.05em; text-transform:uppercase; color: var(--c-text-dim); }

/* Buttons */
.btn { cursor:pointer; border:none; font-weight:600; font-size:.95rem; padding:.75rem 1rem; border-radius: var(--radius-m); display:inline-flex; align-items:center; gap:.5rem; transition: background var(--trans-med), transform var(--trans-fast), box-shadow var(--trans-med); }
.btn:disabled { opacity:.45; cursor:not-allowed; }
.btn--primary { background: linear-gradient(135deg,#fbc15b,#ff8d3a); color:#23130b; box-shadow:0 8px 24px -14px rgba(255,159,59,.6); }
.btn--primary:not(:disabled):hover { transform:translateY(-3px); }
.btn--ghost { background: rgba(20,26,46,.55); color: var(--c-text); border:1px solid var(--c-border); }
.btn--ghost:hover { background: rgba(26,34,58,.75); }
.mini-btn { font-size:.65rem; padding:.35rem .55rem; background:rgba(30,40,72,.6); color: var(--c-text-dim); border:1px solid var(--c-border); border-radius: var(--radius-s); cursor:pointer; }
.mini-btn:hover { color: var(--c-accent); border-color: var(--c-accent); }
.btn-row { display:flex; flex-wrap:wrap; gap:.6rem; }

/* Coin Packs (Deprecated - hidden) */
.pack-grid { display:none; }

/* Stats */
.stat-list { list-style:none; margin:0; padding:0; display:grid; gap:.45rem; }
.stat-label { font-size:.65rem; letter-spacing:.08em; text-transform:uppercase; color: var(--c-text-dim); }
.stat-value { font-weight:600; font-size:.95rem; }
.stat-value.positive { color: var(--c-positive); }
.stat-value.negative { color: var(--c-negative); }
.divider { height:1px; background: rgba(118,148,255,0.2); margin:.5rem 0; }
.tiny-note { margin:.5rem 0 0; font-size:.65rem; color: var(--c-text-dim); }

/* Board */
.board { display:grid; grid-template-columns: repeat(4, 1fr); gap:1rem; padding:1.35rem; border-radius: var(--radius-l); background: linear-gradient(145deg, rgba(13,18,36,.95), rgba(28,34,62,.85)); box-shadow: inset 0 0 0 1px rgba(91,108,176,.32), 0 18px 45px -24px rgba(8,6,24,.85); width:100%; max-width:620px; min-height:620px; position:relative; }
.board-overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(13,18,36,.72); backdrop-filter: blur(3px); font-size:1.1rem; letter-spacing:.05em; color: var(--c-text-dim); border-radius: inherit; }

/* Card */
.card { position:relative; border:none; border-radius:1.1rem; padding:0; height:140px; overflow:hidden; background:transparent; cursor:pointer; transition: transform var(--trans-med), box-shadow var(--trans-med); }
.card:disabled { cursor: default; }
.card:not(:disabled):hover { transform:translateY(-4px); box-shadow: var(--shadow-hover); }
.card__face { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:.25rem; border-radius:inherit; font-weight:700; font-size:1.2rem; letter-spacing:.03em; transition: opacity var(--trans-fast), transform var(--trans-med); }
.card__face--front { background: radial-gradient(circle at 30% 20%, rgba(255,216,128,.95), rgba(242,162,54,.92)); color:#1c0e05; opacity:0; transform:scale(.94); }
.card__face--front span { font-size:.75rem; text-transform:uppercase; letter-spacing:.1em; color: rgba(30,19,10,.8); }
.card__face--back { background: linear-gradient(135deg, rgba(20,28,52,.92), rgba(56,66,102,.88)); color: rgba(219,231,255,.92); font-size:2rem; opacity:1; transform:scale(1); }
.card--flipped .card__face--front, .card--matched .card__face--front { opacity:1; transform:scale(1); }
.card--flipped .card__face--back, .card--matched .card__face--back { opacity:0; transform:scale(1.05); }
.card--matched { box-shadow: inset 0 0 0 2px rgba(255,214,125,.8), 0 12px 34px -20px rgba(255,184,78,.5); }

/* Log */
.panel--log { flex:1; min-height:480px; }
.log-window { flex:1; overflow:auto; display:flex; flex-direction:column; gap:.55rem; padding-right:.4rem; }
.log-window::-webkit-scrollbar { width:8px; }
.log-window::-webkit-scrollbar-track { background: rgba(12,16,32,.4); border-radius:10px; }
.log-window::-webkit-scrollbar-thumb { background: rgba(118,148,255,.35); border-radius:10px; }
.log-window::-webkit-scrollbar-thumb:hover { background: rgba(118,148,255,.5); }
.log-empty { padding:.85rem .9rem; background:rgba(12,16,32,.35); border:1px dashed var(--c-border); border-radius: var(--radius-m); font-size:.8rem; color: var(--c-text-dim); text-align:center; }
.log-entry { padding:.65rem .85rem; background: rgba(12,16,32,.35); border-radius:.6rem; border-left:3px solid rgba(118,148,255,.4); line-height:1.45; color: rgba(211,219,255,.9); font-size:.82rem; display:flex; flex-direction:column; gap:.25rem; }
.log-meta { display:flex; align-items:center; gap:.5rem; }
.log-time { font-size:.65rem; font-family: var(--font-mono); color: rgba(165,181,255,.5); }
.log-badge { font-size:.6rem; text-transform:uppercase; letter-spacing:.06em; padding:.15rem .45rem; border-radius:.4rem; font-weight:700; }
.log-badge--system { background: rgba(118,148,255,.25); color:#a8c4ff; }
.log-badge--match { background: rgba(24,153,74,.25); color: var(--c-positive); }
.log-badge--miss { background: rgba(190,30,60,.25); color: var(--c-negative); }
.log-badge--transaction { background: rgba(255,201,102,.25); color: var(--c-accent); }
.log-badge--game { background: rgba(138,99,210,.25); color:#b794f6; }
.log-message { display:block; }

/* Error Boundary */
.error-fallback { max-width:580px; margin:4rem auto; text-align:center; padding:2rem 2.5rem; background: var(--c-bg-panel); border:1px solid var(--c-border); border-radius: var(--radius-l); box-shadow: var(--shadow-panel); }
.error-fallback__msg { font-size:.7rem; white-space:pre-wrap; text-align:left; background:rgba(12,16,32,.55); padding:.75rem; border-radius: var(--radius-m); max-height:220px; overflow:auto; }
.error-fallback button { margin-top:1rem; }

/* Responsive */
@media (max-width: 1400px) { .app-grid { grid-template-columns: 320px 1fr 400px; } }
@media (max-width: 1200px) { .app-grid { grid-template-columns: 300px 1fr 380px; } }
@media (max-width: 1040px) { 
  .app-main { grid-template-columns: 1fr; } 
  .sidebar-right { border-left: none; border-top: 1px solid var(--c-border); }
  .sidebar-left, .sidebar-right { max-height: none; }
}
@media (max-width: 720px) { .board { grid-template-columns: repeat(3,1fr); min-height:520px; } }
@media (max-width: 520px) { .board { grid-template-columns: repeat(2,1fr); min-height:480px; } }

/* Status Colors */
.status-idle { color: var(--c-text-dim); }
.status-active { 
  color: var(--c-accent); 
  animation: pulse 2s ease-in-out infinite;
}
.status-won { color: var(--c-positive); }
.status-lost { color: var(--c-negative); }
.text-accent { color: var(--c-accent); }
.text-positive { color: var(--c-positive); }
.text-negative { color: var(--c-negative); }
.text-dim { color: var(--c-text-dim); }

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* Panel Base Styles */
.controls-panel, .log-panel-compact {
  background: linear-gradient(145deg, rgba(26,31,46,0.95), rgba(17,24,39,0.95));
  border: 2px solid var(--c-border);
  border-radius: var(--radius-xl);
  padding: 1.25rem;
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  backdrop-filter: blur(10px);
}

.panel-title {
  font-size: 1rem;
  font-weight: 700;
  color: var(--c-accent);
  margin-bottom: 1rem;
  padding-bottom: 0.625rem;
  border-bottom: 2px solid var(--c-border-strong);
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* Controls Panel */
.control-group {
  margin-bottom: 1.125rem;
}

.control-label {
  font-size: 0.8125rem;
  font-weight: 700;
  color: var(--c-text);
  margin-bottom: 0.5rem;
  display: block;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.control-input {
  width: 100%;
  padding: 0.75rem 0.875rem;
  margin-bottom: 0.625rem;
  border-radius: var(--radius-m);
  border: 2px solid var(--c-border);
  background: rgba(17,24,39,0.6);
  color: var(--c-text);
  font-size: 0.9375rem;
  font-weight: 600;
  transition: all var(--trans-fast);
}

.control-input:focus {
  border-color: var(--c-accent);
  outline: none;
  box-shadow: 0 0 0 4px rgba(255,201,102,0.15);
  background: rgba(17,24,39,0.8);
}

.control-input:disabled {
  background: rgba(0, 0, 0, 0.3);
  cursor: not-allowed;
  color: var(--c-text-dim);
}

.control-button {
  width: 100%;
  padding: 0.875rem 1rem;
  border-radius: var(--radius-m);
  border: none;
  font-weight: 700;
  cursor: pointer;
  transition: all var(--trans-fast);
  text-transform: uppercase;
  letter-spacing: 1px;
  font-size: 0.8125rem;
  box-shadow: var(--shadow-md);
}

.control-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}

.button-accent {
  background: linear-gradient(135deg, #ffc966 0%, #ff8d3a 100%);
  color: #23130b;
}

.button-accent:hover:not(:disabled) {
  background: linear-gradient(135deg, #ffd17a 0%, #ffc966 100%);
  transform: translateY(-2px);
  box-shadow: var(--shadow-hover);
}

.button-positive {
  background: linear-gradient(135deg, var(--c-positive) 0%, #059669 100%);
  color: white;
}

.button-positive:hover:not(:disabled) {
  background: linear-gradient(135deg, #52f0a3 0%, var(--c-positive) 100%);
  transform: translateY(-2px);
  box-shadow: 0 0 20px rgba(68,226,143,0.4);
}

.button-negative {
  background: transparent;
  color: var(--c-negative);
  border: 2px solid var(--c-negative);
}

.button-negative:hover:not(:disabled) {
  background: linear-gradient(135deg, var(--c-negative) 0%, #dc2626 100%);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 0 20px rgba(255,91,124,0.4);
}

.control-divider {
  border: none;
  border-top: 2px dashed var(--c-border);
  margin: 1.125rem 0;
}

.input-feedback-error {
  color: var(--c-negative);
  font-size: 0.8125rem;
  margin-top: 0.375rem;
  font-weight: 600;
}

/* Enhanced Action Log */
.log-panel-compact {
  flex: 1;
  min-height: 0;
}

.log-title-compact {
  font-size: 1rem;
  font-weight: 700;
  color: var(--c-accent);
  margin-bottom: 1rem;
  padding-bottom: 0.625rem;
  border-bottom: 2px solid var(--c-border-strong);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.log-window-compact {
  display: flex;
  flex-direction: column;
  gap: 0.625rem;
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
  padding-right: 0.25rem;
}

/* Scrollbar for log window */
.log-window-compact::-webkit-scrollbar {
  width: 6px;
}

.log-window-compact::-webkit-scrollbar-track {
  background: rgba(12,16,32,0.4);
  border-radius: 10px;
}

.log-window-compact::-webkit-scrollbar-thumb {
  background: rgba(118,148,255,0.35);
  border-radius: 10px;
}

.log-window-compact::-webkit-scrollbar-thumb:hover {
  background: rgba(118,148,255,0.5);
}

.log-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem 1rem;
  color: var(--c-text-dim);
  text-align: center;
}

.log-empty-icon {
  font-size: 2.5rem;
  margin-bottom: 0.75rem;
  opacity: 0.5;
}

.log-empty p {
  font-size: 0.875rem;
  font-weight: 500;
}

.log-entry-compact {
  padding: 0.75rem;
  background: linear-gradient(135deg, rgba(17,24,39,0.7), rgba(31,41,55,0.6));
  border-radius: var(--radius-m);
  border-left: 4px solid var(--c-border-strong);
  font-size: 0.8125rem;
  box-shadow: var(--shadow-sm);
}

.log-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.log-timestamp-compact {
  font-size: 0.75rem;
  color: var(--c-text-dim);
  font-family: var(--font-mono);
  font-weight: 600;
}

.log-icon {
  font-size: 1.125rem;
}

.log-message-compact {
  color: var(--c-text);
  line-height: 1.4;
  font-size: 0.8125rem;
  font-weight: 600;
}

.log-win { 
  border-left-color: var(--c-positive); 
  background: linear-gradient(135deg, rgba(68,226,143,0.2), rgba(5,150,105,0.15));
}
.log-win .log-message-compact { 
  color: var(--c-positive); 
  font-weight: 700;
}
.log-win .log-icon { color: var(--c-positive); }

.log-bet { 
  border-left-color: var(--c-accent); 
  background: linear-gradient(135deg, rgba(255,201,102,0.2), rgba(255,184,78,0.15));
}
.log-bet .log-message-compact { 
  color: var(--c-accent);
  font-weight: 700;
}
.log-bet .log-icon { color: var(--c-accent); }

.log-purchase { 
  border-left-color: #3b82f6; 
  background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(37,99,235,0.15));
}
.log-purchase .log-message-compact { color: #60a5fa; }
.log-purchase .log-icon { color: #60a5fa; }

.log-withdraw { 
  border-left-color: var(--c-negative); 
  background: linear-gradient(135deg, rgba(255,91,124,0.2), rgba(220,38,38,0.15));
}
.log-withdraw .log-message-compact { color: var(--c-negative); }
.log-withdraw .log-icon { color: var(--c-negative); }

.log-system { 
  border-left-color: var(--c-accent); 
  background: linear-gradient(135deg, rgba(255,201,102,0.15), rgba(255,184,78,0.1));
}
.log-system .log-icon { color: var(--c-accent); }

/* Game Board */
.game-board-container {
  position: relative;
  padding: 2rem;
  background: linear-gradient(145deg, rgba(26,31,46,0.6), rgba(17,24,39,0.6));
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0;
  height: 100%;
  max-width: 1200px;
  margin: 0 auto;
  border: 2px solid var(--c-border);
  backdrop-filter: blur(10px);
}

.game-board-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(150px, 180px));
  grid-template-rows: repeat(3, minmax(180px, 220px));
  gap: 1.5rem;
  justify-content: center;
  align-items: center;
}

@media (max-width: 768px) {
  .game-board-grid {
    gap: 0.75rem;
  }
}

/* Card Styles - EPIC SIZE with proper aspect ratio */
.card-container {
  perspective: 1200px;
  cursor: pointer;
  width: 100%;
  height: 100%;
  border-radius: var(--radius-l);
  transition: transform var(--trans-med);
}

.card-container:hover:not(.matched):not(.flipped) {
  transform: scale(1.08) rotate(2deg);
}

.card-container:focus-visible {
  outline: 4px solid var(--c-accent);
  outline-offset: 6px;
}

.card-flipper {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform 0.7s;
  transform-style: preserve-3d;
  border-radius: var(--radius-l);
  box-shadow: var(--shadow-xl);
}

.card-container.flipped .card-flipper {
  transform: rotateY(180deg);
}

.card-container.matched .card-flipper {
  box-shadow: 0 0 24px rgba(255, 201, 102, 0.4), 
              0 4px 16px rgba(0, 0, 0, 0.3);
  opacity: 0.95;
  animation: matchPulse 1s ease-out;
}

@keyframes matchPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.card-front, .card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-l);
  font-weight: 800;
  font-size: clamp(2.5rem, 5vw, 5rem);
}

.card-front {
  background: linear-gradient(145deg, #1f2937, #111827);
  border: 1px solid rgba(255, 201, 102, 0.6);
  color: var(--c-accent);
  box-shadow: inset 0 2px 8px rgba(0,0,0,0.4), 
              0 1px 3px rgba(255, 201, 102, 0.2);
}

.card-back {
  background: linear-gradient(145deg, #818cf8, #4f46e5);
  color: white;
  transform: rotateY(180deg);
  border: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow: inset 0 2px 8px rgba(0,0,0,0.3),
              0 2px 8px rgba(129, 140, 248, 0.3);
}

.card-question-mark {
  width: 60%;
  height: 60%;
  color: var(--c-accent);
  filter: drop-shadow(0 4px 8px rgba(255, 201, 102, 0.3));
}

.card-check {
  font-size: clamp(2rem, 4vw, 3rem);
  filter: drop-shadow(0 4px 8px rgba(68, 226, 143, 0.4));
  display: inline-block;
}

/* Counter-rotate checkmark on matched cards to prevent mirroring */
.card-container.matched .card-check {
  transform: scaleX(-1);
}

.card-back .card-symbol {
  filter: drop-shadow(0 6px 12px rgba(0,0,0,0.5));
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

/* Round Overlays */
.round-overlay-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(12px);
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 300ms ease-out;
}

.round-overlay-card {
  background: linear-gradient(145deg, rgba(26,31,46,0.98), rgba(17,24,39,0.98));
  border-radius: var(--radius-xl);
  padding: 3rem;
  text-align: center;
  box-shadow: var(--shadow-xl);
  min-width: 400px;
  max-width: 90%;
  animation: popUp 400ms cubic-bezier(0.175, 0.885, 0.32, 1.27) forwards 100ms;
}

.win-overlay {
  border: 4px solid var(--c-positive);
  box-shadow: 0 0 40px rgba(68,226,143,0.5);
}

.lose-overlay {
  border: 4px solid var(--c-negative);
  box-shadow: 0 0 40px rgba(255,91,124,0.5);
}

.overlay-title {
  font-size: 2.25rem;
  font-weight: 800;
  margin-bottom: 1.25rem;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.win-overlay .overlay-title { 
  color: var(--c-positive); 
  text-shadow: 0 0 20px rgba(68,226,143,0.8);
}

.lose-overlay .overlay-title { 
  color: var(--c-negative); 
  text-shadow: 0 0 20px rgba(255,91,124,0.8);
}

.overlay-message {
  font-size: 1.125rem;
  color: var(--c-text-dim);
  margin-bottom: 2rem;
  font-weight: 500;
}

.overlay-button {
  padding: 1rem 2.5rem;
  font-size: 1.125rem;
  font-weight: 700;
  border-radius: var(--radius-m);
  cursor: pointer;
  transition: all var(--trans-fast);
  text-transform: uppercase;
  border: none;
  letter-spacing: 1px;
}

.overlay-button:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-lg);
}

.button-win {
  background: linear-gradient(135deg, var(--c-positive) 0%, #059669 100%);
  color: white;
}

.button-win:hover {
  box-shadow: 0 0 30px rgba(68,226,143,0.6);
}

.button-lose {
  background: linear-gradient(135deg, var(--c-negative) 0%, #dc2626 100%);
  color: white;
}

.button-lose:hover {
  box-shadow: 0 0 30px rgba(255,91,124,0.6);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes popUp {
  0% { transform: scale(0.7); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

/* Error Boundary */
.error-fallback {
  background: linear-gradient(145deg, #3a0000, #1a0000);
  border: 3px solid var(--c-negative);
  padding: 2.5rem;
  border-radius: var(--radius-xl);
  margin: 2rem;
  color: white;
  text-align: center;
  box-shadow: var(--shadow-xl);
}

.error-fallback h1 {
  color: #ffcccc;
  font-size: 1.75rem;
  font-weight: 700;
}

.error-fallback pre {
  white-space: pre-wrap;
  text-align: left;
  margin-top: 1.5rem;
  padding: 1.25rem;
  background: rgba(0,0,0,0.5);
  border-radius: var(--radius-m);
  color: var(--c-negative);
  font-family: var(--font-mono);
  font-size: 0.8125rem;
}

.controls {
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

.controls__row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}

.controls__store {
  padding: 1.25rem;
  border-radius: 1rem;
  background: linear-gradient(140deg, rgba(18, 22, 46, 0.92), rgba(25, 30, 62, 0.88));
  box-shadow: 0 8px 30px -18px rgba(8, 6, 24, 0.9);
  border: 1px solid rgba(124, 156, 255, 0.16);
}

.controls__store h2 {
  margin: 0 0 0.35rem;
  font-size: 1.15rem;
}

.controls__store p {
  margin: 0 0 1rem;
  color: rgba(202, 210, 255, 0.7);
  font-size: 0.9rem;
}

.store__options {
  display: grid;
  gap: 0.6rem;
}


.store__option:hover {
  border-color: rgba(255, 226, 153, 0.9);
}

.primary {
  background: linear-gradient(135deg, #fbc15b, #ff8d3a);
  color: #211109;
  font-weight: 700;
  border: none;
  box-shadow: 0 12px 30px -18px rgba(255, 159, 59, 0.7);
}

.secondary {
  background: rgba(17, 20, 38, 0.65);
  color: #d9e0ff;
  border: 1px solid rgba(124, 156, 255, 0.24);
  font-weight: 600;
}

.board {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
  padding: 1.5rem;
  border-radius: 1.5rem;
  background: linear-gradient(145deg, rgba(13, 18, 36, 0.95), rgba(28, 34, 62, 0.85));
  box-shadow: inset 0 0 0 1px rgba(91, 108, 176, 0.32), 0 18px 45px -24px rgba(8, 6, 24, 0.85);
  width: 100%;
  max-width: 600px;
  height: 100%;
  max-height: 700px;
  justify-self: center;
}

/* (Old leftover rules trimmed in refactor above) */

.card:disabled {
  cursor: default;
}

.card:not(:disabled):hover {
  transform: translateY(-4px);
  box-shadow: 0 16px 30px -18px rgba(255, 184, 78, 0.45);
}

.card__face {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 0.25rem;
  border-radius: inherit;
  font-weight: 700;
  font-size: 1.2rem;
  letter-spacing: 0.03em;
  transition: opacity 180ms ease, transform 220ms ease;
}

.card__face--front {
  background: radial-gradient(circle at 30% 20%, rgba(255, 216, 128, 0.95), rgba(242, 162, 54, 0.92));
  color: #1c0e05;
  opacity: 0;
  transform: scale(0.94);
}

.card__face--front span {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: rgba(30, 19, 10, 0.8);
}

.card__face--back {
  background: linear-gradient(135deg, rgba(20, 28, 52, 0.92), rgba(56, 66, 102, 0.88));
  color: rgba(219, 231, 255, 0.92);
  font-size: 2rem;
  opacity: 1;
  transform: scale(1);
}

.card--flipped .card__face--front,
.card--matched .card__face--front {
  opacity: 1;
  transform: scale(1);
}

.card--flipped .card__face--back,
.card--matched .card__face--back {
  opacity: 0;
  transform: scale(1.05);
}

.card--matched {
  box-shadow: inset 0 0 0 2px rgba(255, 214, 125, 0.8), 0 12px 34px -20px rgba(255, 184, 78, 0.5);
}

/* Removed obsolete .sidebar block and accidental nested field declarations */

.log h2,
.stats h2 {
  margin: 0 0 0.5rem;
  font-size: 1.1rem;
}

.log {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  flex: 1;
  overflow: hidden;
  position: relative;
}

.log h2 {
  font-size: 1.25rem;
  color: #ffc966;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  border-bottom: 2px solid rgba(255, 201, 102, 0.25);
  padding-bottom: 0.75rem;
  margin-bottom: 1rem;
}

.log-window {
  flex: 1;
  overflow-y: auto;
  scroll-behavior: smooth;
  padding-right: 0.5rem;
}

.log-window::-webkit-scrollbar {
  width: 8px;
}

.log-window::-webkit-scrollbar-track {
  background: rgba(12, 16, 32, 0.4);
  border-radius: 10px;
}

.log-window::-webkit-scrollbar-thumb {
  background: rgba(118, 148, 255, 0.35);
  border-radius: 10px;
}

.log-window::-webkit-scrollbar-thumb:hover {
  background: rgba(118, 148, 255, 0.5);
}

.log-entry {
  padding: 0.65rem 0.85rem;
  background: rgba(12, 16, 32, 0.35);
  border-radius: 0.5rem;
  border-left: 3px solid rgba(118, 148, 255, 0.4);
  transition: all 180ms ease;
  line-height: 1.5;
  color: rgba(211, 219, 255, 0.9);
  font-size: 0.88rem;
  margin-bottom: 0.5rem;
}

.log-entry:hover {
  background: rgba(18, 22, 42, 0.5);
  border-left-color: rgba(255, 201, 102, 0.7);
}

.log-timestamp {
  display: block;
  font-size: 0.72rem;
  color: rgba(165, 181, 255, 0.5);
  font-weight: 600;
  margin-bottom: 0.25rem;
  font-family: 'Courier New', monospace;
}

.log-type {
  display: inline-block;
  padding: 0.15rem 0.5rem;
  border-radius: 0.35rem;
  font-size: 0.7rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-right: 0.5rem;
}

.log-type--system {
  background: rgba(118, 148, 255, 0.25);
  color: #a8c4ff;
}

.log-type--match {
  background: rgba(24, 153, 74, 0.25);
  color: #44e28f;
}

.log-type--miss {
  background: rgba(190, 30, 60, 0.25);
  color: #ff5b7c;
}

.log-type--transaction {
  background: rgba(255, 201, 102, 0.25);
  color: #ffc966;
}

.log-type--game {
  background: rgba(138, 99, 210, 0.25);
  color: #b794f6;
}

.stats {
  flex-shrink: 0;
}

.fine-print {
  margin: 0;
  font-size: 0.8rem;
  color: rgba(197, 206, 255, 0.55);
  line-height: 1.4;
}

/* (Removed obsolete media queries; replaced by new responsive section) */
